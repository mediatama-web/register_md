<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="https://cdn.tailwindcss.com"></script>

<style type="text/tailwindcss">
    @layer utilities { .content-auto { content-visibility: auto; } }
</style>

<body>
    <div class="container mx-auto bg-white border-dashed border-4 border-black md:mx-auto md:mt-10 md:mb-10 md:p-15 p-5 text-black">
        <div>
            <img src="mediatamaweb1.jpg" class="w-full" alt="">

            <span class='mt-3 flex justify-center text-3xl'>Pendaftaran Pelatihan Mediatama Web Indonesia</span>
            <hr class='border-2 mt-2' />

            <span class='mt-10'>
                Mediatama Web Indonesia merupakan perusahaan yang bergerak di bidang Teknologi Informasi berlokasi di Kota
                Padang. Mediatama Web Indonesia menyediakan pelatihan komputer dan kursus pemograman. Mediatama Web Indonesia merupakan
                salah satu perusahaan yang menyediakan pelatihan pemograman terbaik di Sumatera Barat.
            </span>

            <div class="mt-10">
                <div class='grid'>
                    <label htmlFor="Namalengkap">Nama Lengkap <span class="text-red-600" id="error_nama"></span></label>
                    <input type="text" id="nama" class="rounded-md border p-3 mt-2 shadow-md focus:outline-blue-600" placeholder='Masukan Nama Lengkap' />
                </div>

                <div class='grid mt-5'>
                    <label htmlFor="nomorTelpon">Nomor Hp/Whatsapp <span class="text-red-600" id="error_telpon"></span></label>
                    <input type="number" id="telpon" class="rounded-md border p-3 mt-2 shadow-md focus:outline-blue-600" placeholder='+62xxxxx' />
                </div>

                <div class='grid mt-5'>
                    <label htmlFor="Email">Email <span class="text-red-600" id="error_email"></span></label>
                    <input type="email" id="email" class="rounded-md border p-3 mt-2 shadow-md focus:outline-blue-600" placeholder='example@gmail.com' />
                </div>

                <div class='grid mt-5'>
                    <label htmlFor="Alamat">Alamat Lengkap <span class="text-red-600" id="error_alamat"></span></label>
                    <textarea id="alamat" class="rounded-md border p-3 mt-2 shadow-md focus:outline-blue-600" placeholder='Alamat'></textarea>
                </div>

                <div class='grid mt-5'>
                    <label htmlFor="nomorTelpon">Mengikuti Pelatihan <span class="text-red-600" id="error_mengikuti"></span></label>
                    <select id="mengikuti" class="rounded-md border p-3 mt-2 shadow-md focus:outline-blue-600 text-black">
                        
                    </select>
                </div>

                <div class='grid mt-5 mb-5'>
                    <label htmlFor="nomorTelpon">Dapat Info Pelatihan Dari <span class="text-red-600" id="error_info"></span></label>
                    <div class="mt-5 flex gap-4 justify-center">
                        <div class="grid md:grid-cols-5 gap-3 grid-cols-2" id="isiradio">
                        </div>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="button" onclick="kirim()" class='p-3 mt-5 rounded-md bg-blue-600 hover:bg-blue-400 text-white w-[30%]'>Kirim</button>
                </div>

            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        clifford: '#da373d',
                    }
                }
            }
        }

        var html = ""
        var option = "<option value=''>-SILAHKAN PILIH-</option>"

        const radio = ["Website", "Google", "Instagram", "Teman", "Lainya"]
        $(document).ready(function() {

            $('#alert').hide()
            $('#mengikuti').html(option)
            getKelas()

            for (var i = 0; i < radio.length; i++) {

                html += "<div className='flex'>" +
                    "<input type='radio' onclick='getvalueRadio(this)' value='" + radio[i] + "' name='radio' class='w-6 h-6 mr-2 ml-3' />" +
                    "<span>" + radio[i] + "</span>" +
                    "</div>"
            }

            $('#isiradio').html(html)
        })

        function getKelas() {

            $('#mengikuti').html("")
            axios.get("https://booking.mediatamaweb.com/api/get-kelas/Private")
                .then(res => {
                    for (var i = 0; i < res.data.kelas.length; i++) {
                        option += "<option value='" + res.data.kelas[i].id + "'>" + res.data.kelas[i].materi + "</option>"
                    }
                    $('#mengikuti').html(option)
                })
                .then(err => {
                    console.log(err);
                })
        }

        
        var errors = {}; 
        var isFormValid = false
        
        var nama = null
        var alamat = null
        var telpon = null
        var email = null
        var mengikuti = null
        var info = null
        var id_kelas = null

        function getvalueRadio(isi){
            info = isi.value
        }

        
        $('#mengikuti').change(function() {
            var nilaiOption = $('#mengikuti').val()
        })

        function validateForm() { 
            errors = {}; 

            nama = $('#nama').val()
            alamat = $('#alamat').val()
            telpon = $('#telpon').val()
            email = $('#email').val()
            mengikuti = $('#mengikuti').val()
            
            $('#error_nama').html("")
            $('#error_telpon').html("")
            $('#error_info').html("")
            $('#error_alamat').html("")
            $('#error_mengikuti').html("")
            $('#error_email').html("")

            if (nama == "") { 
                errors.nama = true
                $('#error_nama').html('* Wajib Di Isi.'); 
            }

            if (telpon == "") { 
                errors.telpon = true
                $('#error_telpon').html('* Wajib Di Isi.'); 
            } 

            if (info == null) { 
                errors.info = true
                $('#error_info').html('* Wajib Di Isi.'); 
            } 

            if (alamat == "") { 
                errors.alamat = true
                $('#error_alamat').html('* Wajib Di Isi.'); 
            } 

            if (mengikuti == "") { 
                errors.mengikuti = true
                $('#error_mengikuti').html('* Wajib Di Isi.'); 
            } 

            if (email == null) { 
                errors.email = true
                $('#error_email').html('* Wajib Di Isi.'); 
            } else if (!/\S+@\S+\.\S+/.test(email)) { 
                errors.email = true
                $('#error_email').html('* Tidak Valid.'); 
            } 

            if(Object.keys(errors).length === 0){
                isFormValid = false
            }else{
                isFormValid = true
            }

        }; 

        function kirim(){
            validateForm()
            if(isFormValid == false){

                var formData = new FormData();

                formData.append("nama_pengguna", nama);
                formData.append("no_telpon", telpon);
                formData.append("alamat", alamat);
                formData.append("email", email);
                formData.append("info", info);
                formData.append("id_kelas", id_kelas);
                formData.append("mengikuti", mengikuti);
                formData.append("lokasi", "Mediatama Web");

                axios.post("https://booking.mediatamaweb.com/api/daftar",formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                }).then((res) => {
                    window.loaction.reload()
                })
                .catch((err) => {
                    console.log(err);
                })
            }
        }
    </script>
</body>

</html>